<!DOCTYPE html>
<html>

<head>
  <title>â™»ï¸ Smart Waste Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div class="glass-panel">
    <div class="theme-selector">
      <label for="theme-select">ğŸŒ“ Theme:</label>
      <select id="theme-select">
        <option value="light">â˜€ï¸ Light</option>
        <option value="dark">ğŸŒ™ Dark</option>
      </select>
    </div>
    <h1>â™»ï¸ Smart Waste Dashboard</h1>

    <div id="region-select">
      <label for="region">ğŸŒ Region:</label>
      <select id="region" onchange="updateMap()">
        <option value="all">ğŸŒ All Regions</option>
        {% for region in regions %}
        <option value="{{ region }}">{{ region }}</option>
        {% endfor %}
      </select>
    </div>

    <div id="table-controls">
      <input type="text" id="filter-id" placeholder="ğŸ” Filter by Bin ID">
      <input type="text" id="filter-location" placeholder="ğŸ“ Filter by Location">
      <button onclick="sortTable(true)">â¬†ï¸ Sort Ascending</button>
      <button onclick="sortTable(false)">â¬‡ï¸ Sort Descending</button>

      <label><input type="checkbox" id="include-low" checked> ğŸŸ¢ Low Fill</label>
      <label><input type="checkbox" id="include-medium" checked> ğŸŸ  Medium Fill</label>
      <label><input type="checkbox" id="include-high" checked> ğŸ”´ High Fill</label>
    </div>

    <table>
      <thead>
        <tr>
          <th>ğŸ†” Bin ID</th>
          <th>ğŸ“ Location</th>
          <th>ğŸ“ˆ Fill Level (%)</th>
        </tr>
      </thead>
      <tbody id="bin-table-body">
        {% for bin in bins %}
        <tr>
          <td>{{ bin['Bin ID'] }}</td>
          <td>{{ bin['Location'] }}</td>
          <td>{{ bin['Fill Level'] }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="controls">
      <button onclick="calculateRoute()">ğŸ—ºï¸ Calculate Route</button>
      <button onclick="clearAll()">ğŸ§¹ Clear Markers</button>
      <a href="{{ url_for('hotspots_data') }}">ğŸ”¥ Hotspots</a>
    </div>
    <div id="map" data-bins='{{ bins|tojson|safe }}'></div>
    <div id="route-info">
      <p>ğŸ›£ï¸ Total Distance: <span id="distance-value">0</span> km</p>
    </div>
  </div>

  <canvas id="fillLevelChart" width="400" height="200"></canvas>

  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
  <script src="{{ url_for('static', filename='theme.js') }}"></script>
</body>

</html>